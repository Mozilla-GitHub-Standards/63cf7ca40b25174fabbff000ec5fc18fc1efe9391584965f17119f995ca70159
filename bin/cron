#!/bin/sh
":" //# comment; exec /usr/bin/env node --harmony "$0" "$@"

//https://github.com/nodejs/node-v0.x-archive/pull/7007 there is no other way
//how to pass harmony flag

"use strict";

let argv = require('yargs')
  .demand('couchdbHost')
  .default('couchdbHost', 'localhost')
  .describe('couchdbHost', 'Couchdb host')

  .demand('couchdbPort')
  .default('couchdbPort', 5984)
  .describe('couchdbPort', 'Couchdb port')

  .demand('couchdbUser')
  .describe('couchdbUser', 'Couchdb username')

  .demand('couchdbPassword')
  .describe('couchdbPassword', 'Couchdb password')

  .demand('runDb')
  .default('runDb', 'compatipede-runs')
  .describe('runDb', 'Run result db(contains test results)')

  .demand('jobDb')
  .default('jobDb', 'compatipede-jobs')
  .describe('jobDb', 'Jobs db(holds job )')

  .epilog('Run by cron to create new jannah runs')

  .help('h')
  .alias('h', 'help')

  .argv;

require('../lib/cron')(argv);
